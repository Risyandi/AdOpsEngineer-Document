<script type='text/javascript'>
    (function () {
        var useSSL = 'https:' == document.location.protocol;
        var src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
        document.write('<scr' + 'ipt src="' + src + '"></scr' + 'ipt>');
    })();
</script>
<!-- Lotame Audience Keyvalues -->
<script type="text/javascript">
    var dartCCKey = "aud_wt_test";
    var dartCC = "";
    if (typeof (ccauds) != 'undefined') {
        for (var cci = 0; cci < ccauds.Profile.Audiences.Audience.length; cci++) {
            if (cci > 0) dartCC += ",";
            dartCC += ccauds.Profile.Audiences.Audience[cci].abbr;
        }
    }
    googletag.cmd.push(function () {
        googletag.pubads().setTargeting(dartCCKey, [dartCC]);
    });
</script>
<script type="text/javascript">
    // define command googletag
    window.googletag = window.googletag || {};
    googletag.cmd = googletag.cmd || [];
    googletag.cmd.push(function () {
        // googletag service
        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs(true);

        // disable initial load, we will use refresh() to fetch ads.
        // calling this function means that display() calls just
        // register the slot as ready, but do not fetch ads for it.
        googletag.pubads().disableInitialLoad();
        googletag.enableServices();
    });

    // function to generate num id unique
    var numSlotId = 1;
    function generateIdSlot() {
        var numId = numSlotId++;
        return numId;
    }

    // function to load all elements ads event infinites
    function infinitesElementAds() {
    	$('.dfp_leaderboard1').each(function () {
            if ($(this).html() <= 1) {

                // define ads mapping
                var Womantalk_Leaderboard1_mapping = googletag.sizeMapping().
                    addSize([800, 600], [[970,90],[728,90],[468,60],[1,1]]).
                    addSize([0, 0], [[320,50],[300,100],[200,200],[180,150],[250,250],[234,60],[120,240],[1,1]]).
                    build();

                var slotId = generateIdSlot();

                var appendTextLeaderboards1 = "<div id='WT_Homepage_Leaderboard1_" + slotId + "' style='text-align:center;'></div>";

                // append element
                $(this).append(appendTextLeaderboards1);

                var leaderboardSlot1 = googletag.defineSlot('/118200697/Womantalk/WT_Homepage_Leaderboard', [[320,50],[300,100],[200,200],[180,150],[250,250],[234,60],[120,240],[1,1],[970,90],[728,90],[468,60]], 'WT_Homepage_Leaderboard1_' + slotId + '').setTargeting('AudienceWomantalk', ['GoodLifestyle'])
                    .defineSizeMapping(Womantalk_Leaderboard1_mapping).addService(googletag.pubads());

                googletag.display('WT_Homepage_Leaderboard1_' + slotId + '');
                googletag.pubads().refresh([leaderboardSlot1]);
            }
        });

        $('.dfp_leaderboard2').each(function () {
            if ($(this).html() <= 1) {

                // define ads mapping
                var Womantalk_Leaderboard2_mapping = googletag.sizeMapping().
                    addSize([800, 600], [[728,90],[468,60],[1,1]]).
                    addSize([0, 0], [[320,50],[300,100],[234,60],[1,1]]).
                    build();

                var slotId = generateIdSlot();

                var appendTextLeaderboards2 = "<div id='WT_Homepage_Leaderboard2_" + slotId + "' style='text-align:center;'></div>";

                // append element
                $(this).append(appendTextLeaderboards2);

                var leaderboardSlot2 = googletag.defineSlot('/118200697/Womantalk/WT_Homepage_Middleboard', [[320,50],[300,100],[234,60],[1,1],[728,90],[468,60]], 'WT_Homepage_Leaderboard2_' + slotId + '').setTargeting('AudienceWomantalk', ['GoodLifestyle'])
                    .defineSizeMapping(Womantalk_Leaderboard2_mapping).addService(googletag.pubads());

                googletag.display('WT_Homepage_Leaderboard2_' + slotId + '');
                googletag.pubads().refresh([leaderboardSlot2]);
            }
        });

        $('.dfp_retangle').each(function () {
            if ($(this).html() <= 1) {

                // define ads mapping
                var Womantalk_Rectangle_mapping = googletag.sizeMapping().
                    addSize([800, 600], [[300,250],[336,280],[250,250],[320,50],[300,100],[234,60],[200,200],[120,240],[1,1]]).
                    addSize([0, 0], [[320,50],[300,100],[300,250],[300, 600],[240,400],[250,250],[234,60],[200,200],[120,600],[160,600],[120,240],[180,150],[1,1]]).
                    build();

                var slotId = generateIdSlot();

                var appendTextRectangle1 = "<div id='WT_Homepage_Rectangle1_" + slotId + "' style='text-align:center;'></div>";

                // append element
                $(this).append(appendTextRectangle1);

                var rectangleSlot1 = googletag.defineSlot('/118200697/Womantalk/WT_Homepage_Rectangle1', [[320,50],[300,100],[300,250],[300, 600],[240,400],[250,250],[234,60],[200,200],[120,600],[160,600],[120,240],[180,150],[300,250],[336,280],[250,250],[320,50],[300,100],[234,60],[200,200],[120,240]], 'WT_Homepage_Rectangle1_' + slotId + '').defineSizeMapping(Womantalk_Rectangle_mapping).addService(googletag.pubads());

                googletag.display('WT_Homepage_Rectangle1_' + slotId + '');
                googletag.pubads().refresh([rectangleSlot1]);
            }
        });
    }
  
  function firstElementAds(){
          // define mapping
        var Womantalk_Baloon_mapping = googletag.sizeMapping().
            addSize([800, 600], [1, 1]).
            addSize([600, 800], [1, 1]).
            addSize([0, 0], [1, 1]).
            build();
        var Womantalk_Popup_Desktop_mapping = googletag.sizeMapping().
            addSize([800, 600], [1, 1]).
            addSize([0, 0], []).
            build();
        var Womantalk_Popup_Mobile_mapping = googletag.sizeMapping().
            addSize([800, 600], []).
            addSize([0, 0], [1, 1]).
            build(); 

        // define element
        var appendElementPopupDesktop = "<div class='overlay-desktop' id='WT_Popup_Desktop' style='width: 0px;height: 0px;display: none;'></div>";
        var appendElementPopupMobile = "<div class='overlay-mobile' id='WT_Popup_Mobile' style='width: 0px;height: 0px;display: none;'></div>";
        var appendTextBaloon = "<div id='WT_Article_Baloon' style='height: 1px; width: 1px;'></div>";

        $(appendElementPopupDesktop).insertAfter('.dfp_leaderboard2:first');
        $(appendElementPopupMobile).insertAfter('.dfp_leaderboard2:first');
        $(appendTextBaloon).insertAfter('.dfp_retangle:first');                            
        
        // define slot
        var baloonSlot = googletag.defineSlot('/118200697/Womantalk/WT_Article_Baloon', [1, 1], 'WT_Article_Baloon')
            .defineSizeMapping(Womantalk_Baloon_mapping)
            .addService(googletag.pubads());
        var popupDesktopSlot = googletag.defineOutOfPageSlot('/118200697/Womantalk/WT_Article_Popup_Desktop', 'WT_Popup_Desktop')
            .defineSizeMapping(Womantalk_Popup_Desktop_mapping)
            .addService(googletag.pubads());
        var popupMobileSlot = googletag.defineOutOfPageSlot('/118200697/Womantalk/WT_Article_Popup_Mobile', 'WT_Popup_Mobile')
            .defineSizeMapping(Womantalk_Popup_Mobile_mapping)
            .addService(googletag.pubads());

        googletag.display('WT_Popup_Desktop');
        googletag.display('WT_Popup_Mobile');
        googletag.display('WT_Article_Baloon');
        googletag.pubads().refresh([baloonSlot, popupDesktopSlot, popupMobileSlot]);
    }
  
  googletag.cmd.push(function () {
        infinitesElementAds();
        firstElementAds();
    });
</script>