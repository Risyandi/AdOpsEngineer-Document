<script type="text/javascript">
    // source external library googletag
    (function () {
        var useSSL = 'https:' == document.location.protocol;
        var src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
        document.write('<scr' + 'ipt src="' + src + '"></scr' + 'ipt>');
    })();
</script>

<script type="text/javascript">
    // define command googletag
    window.googletag = window.googletag || {};
    googletag.cmd = googletag.cmd || [];
    console.log(window.googletag, ": debug window googletag", googletag.cmd, ": debug command googletag");

    // adds elements
    googletag.cmd.push(function () {

        // googletag service
        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs(true);

        // disable initial load, we will use refresh() to fetch ads.
        // calling this function means that display() calls just
        // register the slot as ready, but do not fetch ads for it.
        googletag.pubads().disableInitialLoad();
        googletag.enableServices();
    });
  
    // function to generate num id unique
    var numSlotId = 1;
    function generateIdSlotName() {
        var numId = numSlotId++;
        return 'WT_Homepage_Leaderboard_' + numId;
    }

    // function to load all elements ads
    function loadAllElementsAds() {
        // create element foreach meet class leaderboard using jquery
        $('.dfp_leaderboard').each(function (indexAds) {
            if ($(this).html() <= 1) {
                var slotIdName = generateIdSlotName();
                console.log(slotIdName, "element leaderboard");
              
                var appendTextLeaderboards =
                    "<div id='" + slotIdName + "'>" +
                    "<\/div>";
              
                // append
                $(this).append(appendTextLeaderboards);
              
                var leaderboardSlot = googletag.defineSlot('/118200697/Womantalk/WT_Homepage_Leaderboard', [728, 90], slotIdName).addService(googletag.pubads());
                console.log(leaderboardSlot, "define leaderboard");

                googletag.display(slotIdName);
                googletag.pubads().refresh([leaderboardSlot]);
            }
         });
    } 
</script>


<!-- 
    firing tags using windows loaded 
-->